<!--
author:   Daniel Nutting

version:  0.0.1

language: en

narrator: US English Female

comment:  Pen Testing Course for Florida Southern College
-->

# Penetration Testing

Foundations to Penetration Testing

# Orientation

What is the objective?
Fastest path to compromise?
Information Disclosure?
Realizing Risk?

## Course Ethics

## CIA Triad

Confidentiality
Integrity
Availability

Trust

## Notetaking

Information collected
Actions performed
Note taking goals:
  - Distinguish between the pen tester and a threat actor
  - Clean up
  - Evidence
  - Repeatability

Things to consider in note taking.

Screenshots

Timestamps

## Scoping

IP ranges
Servernames
Applications

Trust but verify

Secrecy

Impact

Define out of scope (e.g. don't touch the OT network)

## Objectives, Strategy, and Tactics

Time is a valuable, limited resource.

Goal orienting

Parallelization, Dependencies, Task Flows

Organization

Hail Marys

Rabbit Holes

Let the goal of the Pen Test address how you prioritize your time.

## Operating in Obscurity

Mental Model:

- Known

  - How discovered
  - Last verified

- Unknown (i.e. Need to Learn)

  - Testing Options
  - Dependencies

A penetration test involves continuously interating through defining unknowns, and identifying paths to make them known.

Things that can change knowns:

- The client themselves.

  - Power down
  - Weekend and holiday
  - Customer impact
  - Approved changes, new deployments
  - Patching

- Other threat actors

  - Fight for dominance
  - Drive by exploitation

- You

  - Accidental impact
  - Network exhaustion
  - Shutting down systems
  - Getting caught

## Penetration Testing vs Red Teaming

## Test Phases and Structure

# Information Gathering

- Passive vs Active
- Storytelling
- Characters
- Leaving fingerprints

Interacting with the target. Mimic customer? Mimic Vendor? Behave differently?

Infrastructure, Assets, and Personnel

## Attack Surface

Inverted Diamond Model (Diamond model from the Attacker's point of view)

https://cheatsheetseries.owasp.org/cheatsheets/Attack_Surface_Analysis_Cheat_Sheet.html


## Open Source Intelligence (OSINT)

https://osintframework.com/

### Passive Collection

Infrastructure and Actor information without touching the target.

#### Infrastructure

##### Domain Intelligence

Whois, Domain Dossier, 
Private Registration

Whois tools search for objects in an [RFC 3912](https://www.rfc-editor.org/rfc/rfc3912) database.

Parameters to consider.

--no-recursion

-h HOST

WHOIS.CONF - File contains a list of WHOIS servers which can augment or overide the built-in list of the client.

Online Whois tools:
[whois.com](https://www.whois.com/whois/)

Execute a whois using whois.com for the domain flsouthern.edu. What is the authoritative whois database for this domain?

    [[EDUCAUSE]]
    [[?]] The name of the database is in all caps.
    [[?]] The authoritative database is identified in the preamble of the response.

What is the name of the third name server supporting flsouthern.edu?

    [[NS3-01.AZURE-DNS.ORG]]

Consider whether interacting with one of the nameservers could leak information back to flsouthern during a pen test.

Who is the technical contact?

    [[Jean Whitehead]]
    [[?]] Firstname Lastname

What is the technical contact's email address?

    [[jwhitehead@flsouthern.edu]]

Compare the email addresses in the WHOIS results to the user's actual names. Consider what this tells you about potential username structures.

Use the nslookup tool to identify the IP address associated with flsouthern.edu.
Execute a whois against this IP address.

What is the OrgName?

    [[Microsoft Corporation]]
    [[?]] `nslookup flsouthern.edu`
    [[?]] `whois 20.40.202.27`

Execute a whois against publix.com.

What is the Registrar URL?

    [[www.cscprotectsbrands.com]]

What is the Registrant Name?

    [[Pat Caruso]]

Compare the whois results between the web tools and the Kali command line.


##### Network Intelligence

IP, ASN, ISP, MaxMind

##### Job Postings

#### Assets

##### Social Information and Context

Search Engines

Wayback Machine

SaaS Publishing (GitHub, WordPress)

Vendors and "Logos"

#### Personnel

##### Social Media

LinkedIn
Conference Sponsorship

##### Email Mining

##### Password Reuse

### Stimulated OSINT

Third party scanning services

MXtoolbox
Security Headers
Domaintools
UrlScan

### Social Engineering and Phishing

#### Domain Typo Squatting

### Active Data Collection

### Risks and Mitigations

## Wateringhole

# Enumerating Access Options

# Beachhead

# Internal Reconnaissance

# Orienteering

# Report Writing

You can use common [Markdown](https://github.com/adam-p/markdown-here/wiki/Markdown-Cheatsheet) syntax to create your course, such as:

1. Lists
2. ordered or

   * unordered
   * ones ...


| Header 1   | Header 2   |
| :--------- | :--------- |
| Item 1     | Item 2     |


Images:

![images](https://farm2.static.flickr.com/1618/26701766821_7bea494826.jpg)


### Extensions

     --{{0}}--
But you can also include other features such as spoken text.

      --{{1}}--
Insert any kind of audio file:

       {{1}}
?[audio](https://bigsoundbank.com/UPLOAD/mp3/1068.mp3)


     --{{2}}--
Even videos or change the language completely.

       {{2-3}}
!?[video](https://www.youtube.com/watch?v=bICfKRyKTwE)


      --{{3 Russian Female}}--
Первоначально создан в 2004 году Джоном Грубером (англ. John Gruber) и Аароном
Шварцем. Многие идеи языка были позаимствованы из существующих соглашений по
разметке текста в электронных письмах...


    {{3}}
Type "voice" to see a list of all available languages.


### Styling

<!-- class = "animated rollIn" style = "animation-delay: 2s; color: purple" -->
The whole text-block should appear in purple color and with a wobbling effect.
Which is a **bad** example, please use it with caution ...
~~ only this is red ;-) ~~ <!-- class = "animated infinite bounce" style = "color: red;" -->

## Charts

Use ASCII-Art to draw diagrams:

                                    Multiline
    1.9 |    DOTS
        |                 ***
      y |               *     *
      - | r r r r r r r*r r r r*r r r r r r r
      a |             *         *
      x |            *           *
      i | B B B B B * B B B B B B * B B B B B
      s |         *                 *
        | *  * *                       * *  *
     -1 +------------------------------------
        0              x-axis               1

## Quizzes

### A Textquiz

What did the **fish** say when he hit a **concrete wall**?

    [[dam]]

### Multiple Choice

Just add as many points as you wish:

    [[X]] Only the **X** marks the correct point.
    [[ ]] Empty ones are wrong.
    [[X]] ...

### Single Choice

Just add as many points as you wish:

    [( )] ...
    [(X)] <-- Only the **X** is allowed.
    [( )] ...


## Executable Code

You can make your code executable and define projects:

``` js     -EvalScript.js
let who = data.first_name + " " + data.last_name;

if(data.online) {
  who + " is online"; }
else {
  who + " is NOT online"; }
```
``` json    +Data.json
{
  "first_name" :  "Sammy",
  "last_name"  :  "Shark",
  "online"     :  true
}
```
<script>
  // insert the JSON dataset into the local variable data
  let data = @input(1);

  // eval the script that uses this dataset
  eval(`@input(0)`);
</script>


## More

Find out what you also can do ...

https://LiaScript.github.io/course/?https://raw.githubusercontent.com/liaScript/docs/master/README.md